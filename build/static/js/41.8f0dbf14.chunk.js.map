{"version":3,"sources":["components/nav/AdminNav.js","functions/coupon.js","pages/admin/coupon/CreateCouponPage.js"],"names":["AdminNav","className","to","getCoupons","a","axios","get","process","removeCoupon","couponId","authtoken","delete","headers","createCoupon","coupon","post","CreateCouponPage","useState","name","setName","expiry","setExpiry","discount","setDiscount","loading","setLoading","coupons","setCoupons","user","useSelector","state","useEffect","loadAllCoupons","then","res","data","onSubmit","e","preventDefault","token","toast","success","catch","err","console","log","type","onChange","target","value","autoFocus","required","selected","Date","date","length","scope","map","c","key","_id","toLocaleDateString","DeleteOutlined","onClick","window","confirm","error"],"mappings":"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","file":"static/js/41.8f0dbf14.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst AdminNav = () => (\n  <nav>\n    <ul className=\"nav flex-column\">\n      <li className=\"nav-item\">\n        <Link to=\"/admin/dashboard\" className=\"nav-link\">\n          Dashboard\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/product\" className=\"nav-link\">\n          Product\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/products\" className=\"nav-link\">\n          Products\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/category\" className=\"nav-link\">\n          Category\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/sub\" className=\"nav-link\">\n          Sub Category\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/coupon\" className=\"nav-link\">\n          Coupon\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/user/password\" className=\"nav-link\">\n          Password\n        </Link>\n      </li>\n    </ul>\n  </nav>\n);\n\nexport default AdminNav;\n","import axios from \"axios\";\n\nexport const getCoupons = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\n\nexport const removeCoupon = async (couponId, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const createCoupon = async (coupon, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport {\n  getCoupons,\n  removeCoupon,\n  createCoupon,\n} from \"../../../functions/coupon\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\n\nconst CreateCouponPage = () => {\n  const [name, setName] = useState(\"\");\n  const [expiry, setExpiry] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  const [loading, setLoading] = useState(\"\");\n  const [coupons, setCoupons] = useState([]);\n\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllCoupons();\n  }, []);\n\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.table(name, expiry, discount);\n    createCoupon({ name, expiry, discount }, user.token)\n      .then((res) => {\n        setLoading(false);\n        loadAllCoupons(); // load all coupons\n        setName(\"\");\n        setDiscount(\"\");\n        setExpiry(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n      })\n      .catch((err) => console.log(\"create coupon err\", err));\n  };\n\n  const handleRemove = (couponId) => {\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCoupon(couponId, user.token)\n        .then((res) => {\n          loadAllCoupons(); // load all coupons\n          setLoading(false);\n          toast.error(`Coupon \"${res.data.name}\" deleted`);\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col-md-10\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Coupon</h4>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setName(e.target.value)}\n                value={name}\n                autoFocus\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Discount %</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setDiscount(e.target.value)}\n                value={discount}\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Expiry</label>\n              <br />\n              <DatePicker\n                className=\"form-control\"\n                selected={new Date()}\n                value={expiry}\n                onChange={(date) => setExpiry(date)}\n                required\n              />\n            </div>\n\n            <button className=\"btn btn-outline-primary\">Save</button>\n          </form>\n\n          <br />\n\n          <h4>{coupons.length} Coupons</h4>\n\n          <table className=\"table table-bordered\">\n            <thead className=\"thead-light\">\n              <tr>\n                <th scope=\"col\">Name</th>\n                <th scope=\"col\">Expiry</th>\n                <th scope=\"col\">Discount</th>\n                <th scope=\"col\">Action</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {coupons.map((c) => (\n                <tr key={c._id}>\n                  <td>{c.name}</td>\n                  <td>{new Date(c.expiry).toLocaleDateString()}</td>\n                  <td>{c.discount}%</td>\n                  <td>\n                    <DeleteOutlined\n                      onClick={() => handleRemove(c._id)}\n                      className=\"text-danger pointer\"\n                    />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateCouponPage;\n"],"sourceRoot":""}